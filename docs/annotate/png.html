

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Png Annotations &mdash; dvt 0.0.9 documentation</title>
  

  
  
  
  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cut Aggregators" href="../aggregate/cut.html" />
    <link rel="prev" title="Dense Optical Flow Annotations" href="opticalflow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #268bd2" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> dvt
          

          
          </a>

          
            
            
              <div class="version">
                0.0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"> Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html"> Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo.html"> Minimal Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html"> Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../dvt.html"> API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../dvt.html#core-functions">Core Functions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../dvt.html#annotations">Annotations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cielab.html">CieLAB Annotators</a></li>
<li class="toctree-l3"><a class="reference internal" href="diff.html">Frame Difference Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="embed.html">Embed Image Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="face.html">Face Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="hofm.html">Histograms of Optical Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="obj.html">Object Annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="opticalflow.html">Dense Optical Flow Annotations</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Png Annotations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dvt.html#aggregators">Aggregators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dvt.html#pipelines">Pipelines</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">dvt</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../dvt.html">Distant Viewing Toolkit (DVT): API Docs</a> &raquo;</li>
        
      <li>Png Annotations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/annotate/png.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-dvt.annotate.png">
<span id="png-annotations"></span><h1>Png Annotations<a class="headerlink" href="#module-dvt.annotate.png" title="Permalink to this headline">¶</a></h1>
<p>Extract frame images from input.</p>
<p>This module supplies an annotator that saves individual frames to some
location specified on the local machine. It is only useful for its side effects
as no information is returned to the FrameProcessor.</p>
<p class="rubric">Example</p>
<p>Assuming we have an input named “input.mp4”, the following example shows
the a sample usage of the PngAnnotator over two batches of the input.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span> <span class="o">=</span> <span class="n">FrameProcessor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span><span class="o">.</span><span class="n">load_annotator</span><span class="p">(</span><span class="n">PngAnnotator</span><span class="p">(</span><span class="n">output_dir</span><span class="o">=</span><span class="s2">&quot;my-frames&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">FrameInput</span><span class="p">(</span><span class="s2">&quot;input.mp4&quot;</span><span class="p">),</span> <span class="n">max_batch</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>There will now be 512 (256 * 2) frames stored in the directory “my-frames”.
They images named according following the format “frame-000255.png”.</p>
<dl class="class">
<dt id="dvt.annotate.png.PngAnnotator">
<em class="property">class </em><code class="descclassname">dvt.annotate.png.</code><code class="descname">PngAnnotator</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dvt/annotate/png.html#PngAnnotator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvt.annotate.png.PngAnnotator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../core.html#dvt.core.FrameAnnotator" title="dvt.core.FrameAnnotator"><code class="xref py py-class docutils literal notranslate"><span class="pre">dvt.core.FrameAnnotator</span></code></a></p>
<p>Annotator for saving PNG still images from an input.</p>
<p>The annotate method of this annotator does not return any data. It is
useful only for its side effects.</p>
<dl class="attribute">
<dt id="dvt.annotate.png.PngAnnotator.output_dir">
<code class="descname">output_dir</code><a class="headerlink" href="#dvt.annotate.png.PngAnnotator.output_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>location where output frames should be saved. Will be
created if the location does not yet exist.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dvt.annotate.png.PngAnnotator.freq">
<code class="descname">freq</code><a class="headerlink" href="#dvt.annotate.png.PngAnnotator.freq" title="Permalink to this definition">¶</a></dt>
<dd><p>How often to save the image. For example, setting
the frequency to 2 will save every other frame in the batch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dvt.annotate.png.PngAnnotator.size">
<code class="descname">size</code><a class="headerlink" href="#dvt.annotate.png.PngAnnotator.size" title="Permalink to this definition">¶</a></dt>
<dd><p>What should the size of the output images be? Set to
None, the default, to preserve the size as given in the input file.
Given as a tuple of (width, height).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dvt.annotate.png.PngAnnotator.frames">
<code class="descname">frames</code><a class="headerlink" href="#dvt.annotate.png.PngAnnotator.frames" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional list of frames to process. This
should be a list of integers or a 1D numpy array of integers. If
set to something other than None, the freq input is ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">array of ints</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dvt.annotate.png.PngAnnotator.annotate">
<code class="descname">annotate</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dvt/annotate/png.html#PngAnnotator.annotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvt.annotate.png.PngAnnotator.annotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Annotate the batch of frames with the PNG annotator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>batch</strong> (<a class="reference internal" href="../core.html#dvt.core.FrameBatch" title="dvt.core.FrameBatch"><em>FrameBatch</em></a>) – A batch of images to annotate.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns an empty list.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dvt.annotate.png.PngAnnotator.name">
<code class="descname">name</code><em class="property"> = 'png'</em><a class="headerlink" href="#dvt.annotate.png.PngAnnotator.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="dvt.annotate.png.cvtColor">
<code class="descclassname">dvt.annotate.png.</code><code class="descname">cvtColor</code><span class="sig-paren">(</span><em>src</em>, <em>code</em><span class="optional">[</span>, <em>dst</em><span class="optional">[</span>, <em>dstCn</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; dst<a class="headerlink" href="#dvt.annotate.png.cvtColor" title="Permalink to this definition">¶</a></dt>
<dd><p>.   &#64;brief Converts an image from one color space to another.
.
.   The function converts an input image from one color space to another. In case of a transformation
.   to-from RGB color space, the order of the channels should be specified explicitly (RGB or BGR). Note
.   that the default color format in OpenCV is often referred to as RGB but it is actually BGR (the
.   bytes are reversed). So the first byte in a standard (24-bit) color image will be an 8-bit Blue
.   component, the second byte will be Green, and the third byte will be Red. The fourth, fifth, and
.   sixth bytes would then be the second pixel (Blue, then Green, then Red), and so on.
.
.   The conventional ranges for R, G, and B channel values are:
.   -   0 to 255 for CV_8U images
.   -   0 to 65535 for CV_16U images
.   -   0 to 1 for CV_32F images
.
.   In case of linear transformations, the range does not matter. But in case of a non-linear
.   transformation, an input RGB image should be normalized to the proper value range to get the correct
.   results, for example, for RGB f$rightarrowf$ L*u*v* transformation. For example, if you have a
.   32-bit floating-point image directly converted from an 8-bit image without any scaling, then it will
.   have the 0..255 value range instead of 0..1 assumed by the function. So, before calling #cvtColor ,
.   you need first to scale the image down:
.   &#64;code
.   img <a href="#id1"><span class="problematic" id="id2">*</span></a>= 1./255;
.   cvtColor(img, img, COLOR_BGR2Luv);
.   &#64;endcode
.   If you use #cvtColor with 8-bit images, the conversion will have some information lost. For many
.   applications, this will not be noticeable but it is recommended to use 32-bit images in applications
.   that need the full range of colors or that convert an image before an operation and then convert
.   back.
.
.   If conversion adds the alpha channel, its value will set to the maximum of corresponding channel
.   range: 255 for CV_8U, 65535 for CV_16U, 1 for CV_32F.
.
.   &#64;param src input image: 8-bit unsigned, 16-bit unsigned ( CV_16UC… ), or single-precision
.   floating-point.
.   &#64;param dst output image of the same size and depth as src.
.   &#64;param code color space conversion code (see #ColorConversionCodes).
.   &#64;param dstCn number of channels in the destination image; if the parameter is 0, the number of the
.   channels is derived automatically from src and code.
.
.   &#64;see &#64;ref imgproc_color_conversions</p>
</dd></dl>

<dl class="function">
<dt id="dvt.annotate.png.imwrite">
<code class="descclassname">dvt.annotate.png.</code><code class="descname">imwrite</code><span class="sig-paren">(</span><em>filename</em>, <em>img</em><span class="optional">[</span>, <em>params</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; retval<a class="headerlink" href="#dvt.annotate.png.imwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>.   &#64;brief Saves an image to a specified file.
.
.   The function imwrite saves the image to the specified file. The image format is chosen based on the
.   filename extension (see cv::imread for the list of extensions). In general, only 8-bit
.   single-channel or 3-channel (with ‘BGR’ channel order) images
.   can be saved using this function, with these exceptions:
.
.   - 16-bit unsigned (CV_16U) images can be saved in the case of PNG, JPEG 2000, and TIFF formats
.   - 32-bit float (CV_32F) images can be saved in PFM, TIFF, OpenEXR, and Radiance HDR formats;
.   3-channel (CV_32FC3) TIFF images will be saved using the LogLuv high dynamic range encoding
.   (4 bytes per pixel)
.   - PNG images with an alpha channel can be saved using this function. To do this, create
.   8-bit (or 16-bit) 4-channel image BGRA, where the alpha channel goes last. Fully transparent pixels
.   should have alpha set to 0, fully opaque pixels should have alpha set to 255/65535 (see the code sample below).
.
.   If the format, depth or channel order is different, use
.   Mat::convertTo and cv::cvtColor to convert it before saving. Or, use the universal FileStorage I/O
.   functions to save the image to XML or YAML format.
.
.   The sample below shows how to create a BGRA image and save it to a PNG file. It also demonstrates how to set custom
.   compression parameters:
.   &#64;include snippets/imgcodecs_imwrite.cpp
.   &#64;param filename Name of the file.
.   &#64;param img Image to be saved.
.   &#64;param params Format-specific parameters encoded as pairs (paramId_1, paramValue_1, paramId_2, paramValue_2, … .) see cv::ImwriteFlags</p>
</dd></dl>

<dl class="function">
<dt id="dvt.annotate.png.resize">
<code class="descclassname">dvt.annotate.png.</code><code class="descname">resize</code><span class="sig-paren">(</span><em>src</em>, <em>dsize</em><span class="optional">[</span>, <em>dst</em><span class="optional">[</span>, <em>fx</em><span class="optional">[</span>, <em>fy</em><span class="optional">[</span>, <em>interpolation</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; dst<a class="headerlink" href="#dvt.annotate.png.resize" title="Permalink to this definition">¶</a></dt>
<dd><p>.   &#64;brief Resizes an image.
.
.   The function resize resizes the image src down to or up to the specified size. Note that the
.   initial dst type or size are not taken into account. Instead, the size and type are derived from
.   the <cite>src</cite>,`dsize`,`fx`, and <cite>fy</cite>. If you want to resize src so that it fits the pre-created dst,
.   you may call the function as follows:
.   &#64;code
.   // explicitly specify dsize=dst.size(); fx and fy will be computed from that.
.   resize(src, dst, dst.size(), 0, 0, interpolation);
.   &#64;endcode
.   If you want to decimate the image by factor of 2 in each direction, you can call the function this
.   way:
.   &#64;code
.   // specify fx and fy and let the function compute the destination image size.
.   resize(src, dst, Size(), 0.5, 0.5, interpolation);
.   &#64;endcode
.   To shrink an image, it will generally look best with #INTER_AREA interpolation, whereas to
.   enlarge an image, it will generally look best with c#INTER_CUBIC (slow) or #INTER_LINEAR
.   (faster but still looks OK).
.
.   &#64;param src input image.
.   &#64;param dst output image; it has the size dsize (when it is non-zero) or the size computed from
.   src.size(), fx, and fy; the type of dst is the same as of src.
.   &#64;param dsize output image size; if it equals zero, it is computed as:
.   f[texttt{dsize = Size(round(fx*src.cols), round(fy*src.rows))}f]
.   Either dsize or both fx and fy must be non-zero.
.   &#64;param fx scale factor along the horizontal axis; when it equals 0, it is computed as
.   f[texttt{(double)dsize.width/src.cols}f]
.   &#64;param fy scale factor along the vertical axis; when it equals 0, it is computed as
.   f[texttt{(double)dsize.height/src.rows}f]
.   &#64;param interpolation interpolation method, see #InterpolationFlags
.
.   &#64;sa  warpAffine, warpPerspective, remap</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../aggregate/cut.html" class="btn btn-neutral float-right" title="Cut Aggregators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="opticalflow.html" class="btn btn-neutral float-left" title="Dense Optical Flow Annotations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Taylor Arnold and Lauren Tilton

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>